# MCDA Core v0.8 执行计划

**版本**: v0.8 - 核心功能完善与验证
**创建日期**: 2026-02-04
**状态**: 📋 规划中
**预计工期**: 25 人日（5 周）
**方法**: 选项 B - 按原计划推进，确保功能完整性

---

## 📊 现状分析

### ✅ 已实现功能（v0.7 及之前）

#### 核心算法
- ✅ WSM, WPM
- ✅ TOPSIS
- ✅ VIKOR
- ✅ TODIM
- ✅ ELECTRE-I
- ✅ PROMETHEE II

#### 区间算法（v0.7）
- ✅ VIKOR 区间版本（38 个测试）
- ✅ TODIM 区间版本（8 个测试）
- ✅ 可能度排序（25 个测试）

#### 赋权方法
- ✅ AHP（层次分析法）
- ✅ 熵权法
- ✅ CRITIC 法
- ✅ CV（变异系数）
- ✅ **博弈论组合赋权**（20 个测试）✅
- ✅ **PCA 主成分分析**（32 个测试）✅

#### 群决策功能
- ✅ **DecisionMaker 模型**
- ✅ **GroupDecisionProblem 模型**
- ✅ **群决策服务**（141 个测试）✅
- ✅ **共识度测量**
- ✅ **德尔菲法**（包含在群决策测试中）

**测试统计**:
- 博弈论组合赋权: 20 个测试 ✅
- 群决策功能: 141 个测试 ✅
- PCA 权重计算: 32 个测试 ✅
- **小计**: 193 个测试全部通过

---

## 🎯 v0.8 目标

### 定位
**v0.8 = 功能验证 + 算法补全 + 文档完善**

**策略**: 选项 B - 重新审视需求，确保功能完整性

### 核心任务

#### 1. 功能验证与完善（10 人日）
- 验证现有功能的完整性
- 补充缺失的测试
- 修复发现的 Bug
- 集成测试

#### 2. 算法补全（8 人日）
- ELECTRE-I 区间版本（4 人日）
- PROMETHEE 区间版本（4 人日）
- 区间 TOPSIS（如未实现）

#### 3. 文档与优化（7 人日）
- API 文档完善
- 使用教程
- 性能优化
- 发布准备

---

## 📋 详细任务分解

### Phase 1: 功能验证（5 人日，1 周）

#### 任务 1.1: 验证博弈论组合赋权（1 人日）

**目标**: 确保博弈论组合赋权功能完整且正确

**验证清单**:
- [x] 已有 20 个测试通过
- [ ] 验证支持 4+ 种赋权方法组合
- [ ] 验证数学公式正确性
- [ ] 验证收敛性和稳定性
- [ ] 补充集成测试

**交付物**:
- 验证报告
- Bug 修复（如有）
- 集成测试（5+ 个）

---

#### 任务 1.2: 验证群决策功能（2 人日）

**目标**: 确保群决策功能完整

**验证清单**:
- [x] 已有 141 个测试通过
- [ ] 验证 DecisionMaker 模型
- [ ] 验证 GroupDecisionProblem 模型
- [ ] 验证聚合方法（算术平均、加权平均、Borda、Copeland）
- [ ] 验证共识度测量方法
- [ ] 验证德尔菲法流程

**交付物**:
- 验证报告
- Bug 修复（如有）
- 功能演示脚本

---

#### 任务 1.3: 验证 PCA 权重计算（1 人日）

**目标**: 确保 PCA 权重计算功能完整

**验证清单**:
- [x] 已有 32 个测试通过
- [ ] 验证主成分提取准确性
- [ ] 验证权重计算公式
- [ ] 与 sklearn 对照验证（可选）
- [ ] 性能测试

**交付物**:
- 验证报告
- 性能基准测试
- Bug 修复（如有）

---

#### 任务 1.4: 集成测试与 Bug 修复（1 人日）

**目标**:
- 端到端集成测试
- 修复发现的 Bug
- 性能优化

**集成测试场景**:
- 博弈论组合赋权 + 群决策
- PCA + 群决策
- 完整决策流程

**交付物**:
- 集成测试套件
- Bug 修复列表
- 性能测试报告

---

### Phase 2: 算法补全（8 人日，1.5 周）

#### 任务 2.1: ELECTRE-I 区间版本（4 人日）

**目标**: 实现 ELECTRE-I 算法的区间版本

**数学模型**:
```
和谐指数: c(a,b) = Σ w_j · c_j(a,b)
其中: c_j(a,b) = 基于区间差的和谐度

不和谐指数: d(a,b) = Σ w_j · d_j(a,b) / Σ w_j
其中: d_j(a,b) = 基于区间差不和谐度

级别优于关系: a S b ⇔ C(a,b) ≥ C(b,a) ∧ D(a,b) ≤ λ
```

**实现步骤**:
1. 扩展 ELECTRE-I 基类
2. 实现区间和谐指数计算
3. 实现区间不和谐指数计算
4. 实现区间核提取
5. 集成可能度排序
6. 测试验证

**交付物**:
- `electre1_interval.py` (~300 行)
- 单元测试（20+ 个）
- 集成测试（5+ 个）
- 使用文档

**验收标准**:
- [ ] 测试通过率 100%
- [ ] 测试覆盖率 ≥ 85%
- [ ] 文档完整

---

#### 任务 2.2: PROMETHEE 区间版本（4 人日）

**目标**: 实现 PROMETHEE II 算法的区间版本

**数学模型**:
```
偏好指数: P(a,b) = Σ w_j · p_j(a,b)
其中: p_j(a,b) = 基于区间差的偏好函数

净流量: Φ(a) = Σ P(a,b) - P(b,a)
排名: 根据 Φ(a) 降序排列
```

**实现步骤**:
1. 扩展 PROMETHEE II 服务
2. 实现区间偏好函数
3. 实现区间净流量计算
4. 集成可能度排序
5. 测试验证

**交付物**:
- `promethee2_interval.py` (~300 行)
- 单元测试（20+ 个）
- 集成测试（5+ 个）
- 使用文档

**验收标准**:
- [ ] 测试通过率 100%
- [ ] 测试覆盖率 ≥ 85%
- [ ] 文档完整

---

### Phase 3: 区间 TOPSIS（可选，3 人日）

**目标**: 补全区间算法家族

**前提条件**: 如 TOPSIS 区间版本尚未实现

**实现步骤**:
1. 创建 IntervalTOPSIS 算法类
2. 实现区间标准化
3. 实现区间理想解/负理想解
4. 实现区间距离计算
5. 集成可能度排序
6. 测试验证

**交付物**:
- `topsis_interval.py` (~250 行)
- 单元测试（15+ 个）
- 使用文档

**验收标准**:
- [ ] 测试通过率 100%
- [ ] 测试覆盖率 ≥ 85%
- [ ] 文档完整

---

### Phase 4: 文档完善（7 人日，1.5 周）

#### 任务 4.1: API 文档更新（3 人日）

**目标**: 完善所有 API 文档

**更新内容**:
- 博弈论组合赋权 API 文档
- 群决策功能 API 文档
- PCA 权重计算 API 文档
- 德尔菲法 API 文档
- ELECTRE-I 区间版本 API 文档
- PROMETHEE 区间版本 API 文档

**交付物**:
- 完整的 API 参考文档
- 代码注释完善
- 类型注解检查

---

#### 任务 4.2: 使用教程编写（3 人日）

**目标**: 提供完整的使用教程

**教程内容**:
1. 博弈论组合赋权教程
2. 群决策功能教程
3. 德尔菲法教程
4. PCA 权重计算教程
5. 区间算法使用教程
6. 完整决策流程示例

**交付物**:
- 6 篇使用教程
- Jupyter Notebook 示例
- 视频教程（可选）

---

#### 任务 4.3: 性能优化与发布准备（1 人日）

**目标**: 性能优化和发布准备

**性能优化**:
- 关键算法性能测试
- NumPy 向量化优化
- 缓存机制（可选）

**发布准备**:
- CHANGELOG.md 更新
- README.md 更新
- 版本总结文档
- Git tag 准备

**交付物**:
- 性能测试报告
- CHANGELOG.md
- 版本总结

---

## 📊 工期统计

| Phase | 任务 | 工期 | 累计 |
|-------|------|------|------|
| Phase 1 | 功能验证与完善 | 5 人日 | 5 人日 |
| Phase 2 | 算法补全 | 8 人日 | 13 人日 |
| Phase 3 | 区间 TOPSIS（可选） | 3 人日 | 16 人日 |
| Phase 4 | 文档完善 | 7 人日 | 23 人日 |
| 缓冲 | - | 2 人日 | 25 人日 |

**总工期**: 25 人日（5 周）

---

## 🎯 优先级与依赖关系

### 优先级 P0（必须完成）
- ✅ Phase 1: 功能验证与完善（5 人日）
- ✅ Phase 2.1: ELECTRE-I 区间版本（4 人日）

### 优先级 P1（重要）
- ✅ Phase 2.2: PROMETHEE 区间版本（4 人日）
- ✅ Phase 4.1: API 文档更新（3 人日）

### 优先级 P2（可选）
- ⏸️ Phase 3: 区间 TOPSIS（3 人日）
- ✅ Phase 4.2: 使用教程（3 人日）

### 依赖关系
```
Phase 1 (功能验证)
  ↓
Phase 2 (算法补全)
  ├─ ELECTRE-I 区间 (独立)
  └─ PROMETHEE 区间 (独立)
  ↓
Phase 4 (文档完善)
```

---

## ⚠️ 风险与缓解措施

### 高风险

#### 风险 1: ELECTRE-I 区间版本学术支持不足
**描述**: v0.7 Phase 0 调研显示 ELECTRE-I 区间学术支持不足
**概率**: 中等
**影响**: 可能无法正确实现
**缓解措施**:
- 参考 ELECTRE-I 精确数版本
- 咨询学术顾问
- 如确实不可行，调整为增强现有 ELECTRE-I 功能

#### 风险 2: 区间运算复杂度
**描述**: 区间和谐指数、不和谐指数计算复杂
**概率**: 中等
**影响**: 性能问题或数值不稳定
**缓解措施**:
- 使用 NumPy 向量化
- 添加数值稳定性检查
- 充分的性能测试

### 中风险

#### 风险 3: 集成测试覆盖不足
**描述**: 新功能与现有功能集成可能有问题
**概率**: 低
**影响**: 质量问题
**缓解措施**:
- 优先编写集成测试
- 使用 pytest fixtures
- 端到端测试

---

## 🧪 测试策略

### 单元测试
- **目标覆盖率**: ≥ 85%
- **测试框架**: pytest
- **测试组织**: 按模块分组

### 集成测试
- **场景覆盖**: 真实业务场景
- **算法集成**: 多算法协同工作
- **数据流测试**: 端到端流程

### 性能测试
- **基准测试**: 与 v0.7 对比
- **规模测试**: 大数据集测试
- **压力测试**: 极限情况测试

---

## 📝 验收标准

### 功能验收
- [ ] 所有新功能测试通过率 100%
- [ ] 测试覆盖率 ≥ 85%
- [ ] 集成测试全部通过
- [ ] 无已知 P0/P1 Bug

### 质量验收
- [ ] 代码规范符合 PEP 8
- [ ] 类型注解 100% 覆盖
- [ ] 文档字符串完整
- [ ] 性能不低于 v0.7

### 文档验收
- [ ] API 文档完整
- [ ] 使用教程清晰
- [ ] 示例代码可运行
- [ ] CHANGELOG 更新

---

## 📅 时间表

### 第 1 周（5 人日）
- Phase 1: 功能验证与完善

### 第 2-3 周（8 人日）
- Phase 2: 算法补全
  - ELECTRE-I 区间版本
  - PROMETHEE 区间版本

### 第 4 周（5 人日）
- Phase 4.1: API 文档更新（3 人日）
- Phase 4.2: 使用教程（2 人日）

### 第 5 周（7 人日）
- Phase 3: 区间 TOPSIS（3 人日，可选）
- Phase 4.3: 性能优化与发布准备（4 人日）

**总计**: 25 人日

---

## 🚀 下一步行动

### 立即行动
1. 创建 v0.8 工作目录
2. 创建进度跟踪文档
3. 开始 Phase 1: 功能验证

---

**计划状态**: 📋 等待用户确认

**请确认**: 此计划是否符合您的预期？是否需要调整？

确认后我们将立即开始执行！🚀
